"use strict";(self.webpackChunk_rax_materials_scaffolds_app_ts=self.webpackChunk_rax_materials_scaffolds_app_ts||[]).push([[343],{265:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var n,r=a(461),i=a(997);!function(e){e[e.WHITE=0]="WHITE",e[e.RED=1]="RED",e[e.RED_ORANGE=2]="RED_ORANGE",e[e.ORANGE=3]="ORANGE",e[e.ORANGE_YELLOW=4]="ORANGE_YELLOW",e[e.YELLOW=5]="YELLOW",e[e.YELLOW_GREEN=6]="YELLOW_GREEN",e[e.GREEN=7]="GREEN",e[e.GREEN_BLUE=8]="GREEN_BLUE",e[e.BLUE=9]="BLUE",e[e.BLUE_PURPLE=10]="BLUE_PURPLE",e[e.PURPLE=11]="PURPLE",e[e.PINK=12]="PINK",e[e.BLACK=13]="BLACK"}(n||(n={}));var c=["#ffffff","#ff4c4f","#ff7a45","#ffa940","#ffc53d","#ffec3d","#bae637","#7Ad03f","#38cec9","#40a8ff","#5a7ef8","#9253df","#f75aab","#000000"],o={currentColor:n.BLACK,matrix:1,drawingMap:[],editable:!0,received:!1},l=a(346),s=a(487),d=(a(527),(0,l.l9)({useEffect:r.useEffect})),u=(d.usePageShow,d.usePageHide,[["000000","0"],["000001","1"],["000010","2"],["000011","3"],["000100","4"],["000101","5"],["000110","6"],["000111","7"],["001000","8"],["001001","9"],["001010","a"],["001011","b"],["001100","c"],["001101","d"],["001110","e"],["001111","f"],["010000","g"],["010001","h"],["010010","i"],["010011","j"],["010100","k"],["010101","l"],["010110","m"],["010111","n"],["011000","o"],["011001","p"],["011010","q"],["011011","r"],["011100","s"],["011101","t"],["011110","u"],["011111","v"],["100000","w"],["100001","x"],["100010","y"],["100011","z"],["100100","A"],["100101","B"],["100110","C"],["100111","D"],["101000","E"],["101001","F"],["101010","G"],["101011","H"],["101100","I"],["101101","J"],["101110","K"],["101111","L"],["110000","M"],["110001","N"],["110010","O"],["110011","P"],["110100","Q"],["110101","R"],["110110","S"],["110111","T"],["111000","U"],["111001","V"],["111010","W"],["111011","X"],["111100","Y"],["111101","Z"],["111110","*"],["111111","$"]]),f=new Map(u),m=new Map(u.map((function(e){return e.reverse()}))),p=function(){function e(e,t){switch(this.encodedString=void 0,this.decodedMapData=void 0,this.codeType=void 0,this.codeType=e,e){case"ened":t&&(this.encodedString=t);break;case"deed":t&&(this.decodedMapData=t)}}var t=e.prototype;return t.decodeParamData=function(){if("deed"===this.codeType)return null;for(var e,t=function(e){for(var t=e.length,a=0,n=[];!(t-a<=0);)n.push(m.get(e.substring(a,a+1))||""),a+=1;return n.join("")}(this.encodedString),a=t.substring(2,t.length),n=0,r=[];a.length-n>=4;)r.push({color:(e=a.substring(n,n+4),4===e.length?parseInt(e,2):-1)}),n+=4;return this.decodedMapData=r,this.decodedMapData},t.encodeParamData=function(){if("ened"===this.codeType)return null;var e="00"+this.decodedMapData.map((function(e){return function(e){var t=parseInt(e).toString(2),a=t.length;if(a<4)for(var n=0;n<4-a;n++)t="0"+t;return t}(e.color)})).join("");return this.encodedString=function(e){for(var t=e.length,a=0,n=[],r=e+new Array(6-t%6).fill(0).join("");!(t-a<=0);)n.push(f.get(r.substring(a,a+6))||""),a+=6;return n.join("")}(e),this.encodedString},e}();function E(e){return(0,r.createElement)(i.Z,{className:"Loading",style:{display:e.loading?"blcok":"none"}},(0,r.createElement)(i.Z,{className:"icon-container"},(0,r.createElement)(i.Z,{className:"icon",style:{backgroundImage:"url('https://lakphy.me/pixel/assets/loading.png')"}})),(0,r.createElement)(i.Z,{className:"loading-text"},"Loading..."))}function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},h.apply(this,arguments)}function g(){var e,t=(0,r.useState)(Math.min(.96*window.innerWidth,800)),a=t[0],l=t[1],d=(0,r.useState)(!0),u=d[0],f=d[1],m=(0,r.useState)(o),g=m[0],x=m[1];return(0,r.useEffect)((function(){var e=function(){l(Math.min(.96*window.innerWidth,800))};window.addEventListener("resize",e);var t=(0,s.Z)();if(t.x&&t.x.length>0){var a=function(){var e=(0,s.Z)();return console.log(e),e.x&&e.x.length>0?new p("ened",e.x).decodeParamData():[]}();a.length>=16?(x((function(e){return h({},e,{matrix:parseInt(Math.sqrt(a.length).toString(),10),drawingMap:a.slice(0,Math.pow(parseInt(Math.sqrt(a.length).toString(),10),2)),editable:!1,received:!0})})),f(!1)):f(!1)}else f(!1);return function(){window.removeEventListener("resize",e)}}),[]),(0,r.createElement)(r.Fragment,null,(0,r.createElement)(E,{loading:u}),(0,r.createElement)(i.Z,{className:"safe-view",style:{width:a+"px"}},(0,r.createElement)(i.Z,{className:"matrix-back",style:{width:a+"px",height:a+"px"}}),(0,r.createElement)(i.Z,{className:"matrix-container",style:{width:a+"px",height:a+"px"},onClick:function(e){var t=parseInt(e.target.dataset.index,10);if((0===t||t)&&g.matrix>1){if(!g.editable)return null;x((function(e){var a=e.drawingMap;return a[t]={color:g.currentColor},h({},e,{draftMap:a})}))}else{if(!(t&&g.matrix<=1))return null;x((function(e){return h({},e,{matrix:t,drawingMap:new Array(t*t).fill(null).map((function(){return{color:n.WHITE}}))})}))}return null}},g.matrix>1?(e=g).drawingMap.map((function(t,n){return(0,r.createElement)(i.Z,{style:{backgroundColor:c[t.color],width:.67*a/e.matrix+"px",height:.67*a/e.matrix+"px",margin:.05*a/e.matrix+"px",borderRadius:.1*a/e.matrix+"px"},className:"matrix-block","data-index":n,key:n.toString()})})):(0,r.createElement)(r.Fragment,null,(0,r.createElement)(i.Z,{className:"selector-title"},"Please select the drawing size:"),new Array(21).fill((0,r.createElement)(r.Fragment,null)).map((function(e,t){return t>=4?(0,r.createElement)(i.Z,{key:t,className:"selector-container","data-index":t},(0,r.createElement)(i.Z,{className:"selector-back","data-index":t}),(0,r.createElement)(i.Z,{className:"selector","data-index":t},t)):null})))),(0,r.createElement)(i.Z,{className:"notice"},g.received?'You received an awesome pixel art, click "Edit" to release your inspiration, click "Share" to share your canvas with others, click "Clear" to clear the canvas.':""),(0,r.createElement)(i.Z,{className:"controls"},(0,r.createElement)(i.Z,{className:"control-btn",onClick:function(){x(o)}},"Clear"),(0,r.createElement)(i.Z,{className:"control-btn",onClick:function(){x((function(e){return h({},e,{editable:!e.editable,received:!1})}))}},g.editable?"Done":"Edit"),(0,r.createElement)(i.Z,{className:"control-btn",onClick:function(){if(!(g.matrix<=1)){var e=new p("deed",g.drawingMap).encodeParamData();console.log(e),history.pushState({},"","#/?x="+e)}}},"Share")),(0,r.createElement)(i.Z,{className:"color-selector",onClick:function(e){var t=e.target.dataset.color;(0===t||t)&&x((function(e){return h({},e,{currentColor:t})}))}},c.map((function(e,t){return(0,r.createElement)(i.Z,{className:"color-unit",key:t},(0,r.createElement)(i.Z,{className:"color-back"}),(0,r.createElement)(i.Z,{className:"color-front",style:{backgroundColor:c[t]},"data-color":t},(0,r.createElement)("img",{"data-color":t,className:"color-sign",src:13===t||12===t||11===t||10===t||9===t||1===t||2===t?"https://lakphy.me/pixel/assets/pen-white.png":"https://lakphy.me/pixel/assets/pen-black.png",style:c[g.currentColor]===e?{opacity:1,transform:"scale(1)"}:{opacity:0,transform:"scale(0.01)"}})))})))))}}}]);