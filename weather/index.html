<!DOCTYPE html>
<html>

<head>
    <title>天气预报</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=no" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="auther" content="Lakphy">
    <meta name="description=" content="Lakphy">
    <meta name="Keywords" content="Lakphy">
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="css/mdui.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
</head>

<body>
    <!--body-->
    <div id="bg">
        <!--background-->
    </div>
    <div class="mdui-container">
        <div class="mdui-toolbar mdui-color-theme" id="topbar">
            <a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="fa fa-cloud fa-lg mdui-icon material-icons" aria-hidden="true"></i></a>
            <span class="mdui-typo-title mdui-hidden-xs" id="province"></span>
            <span class="mdui-typo-title" id="city">Lakphy的天气预报</span>
            <div class="mdui-toolbar-spacer"></div>
            <a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="fa fa-search fa-lg mdui-icon material-icons" aria-hidden="true"></i></a>
        </div>
        <br>
        <div class="mdui-row-sm-2 mdui-row-xs-1">
            <!--左上-->
            <div class="mdui-col" style="margin-top: 18vh;margin-bottom: 5vh;">
                <!--温度-->
                <div class="temperature"><span style="font-size: 8vh;"><b>°C</b></span></div>
                <!--天气-->
                <div class="weather"></div>
                <div class="mdui-chip">
                    <span class="mdui-chip-title">小贴士</span>
                </div><br><br>
                <div class="ganmao"></div>
            </div>
            <!--右上-->
            <div class="mdui-col" id="detail">
                <a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="fa fa-calendar fa-lg mdui-icon material-icons" aria-hidden="true"></i></a>
                <span class="mdui-typo-title" id="date"></span><br>
                <a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="fa fa-flag fa-lg mdui-icon material-icons" aria-hidden="true"></i></a>
                <span class="mdui-typo-title" id="wind"></span>
                <div class="mdui-table-fluid cast-board mdui-shadow-0 mdui-text-color-white">
                    <table class="mdui-table cast-table mdui-text-color-white" style="color:white">
                        <thead>
                            <tr>
                                <th>未来三天</th>
                                <th>天气</th>
                                <th>温度</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="mdui-collapse mdui-text-color-black mdui-m-a-2 mdui-text-center mdui-text-color-white" mdui-collapse>
                        <div class="mdui-collapse-item">
                            <div class="mdui-collapse-item-header">
                                <p><a href="javascript:;" style="color: white;"><i class="fa fa-bar-chart fa-lg" aria-hidden="true">&nbsp;</i>更多</a></p>
                            </div>
                            <div class="mdui-collapse-item-body">
                                <p>item1 content</p>
                                <p>item1 content</p>
                                <p>item1 content</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--JS-->
    <script src="js/jquery-3.5.1.min.js"></script>
    <script src="js/main.js"></script>
    <script src="js/mdui.min.js"></script>
    <script>
        var city, province, adcode;
        var weatherGaode, weather;
        $.get(
            'https://restapi.amap.com/v3/ip?key=07ea516d52e6cbc1bed936289d8061c9',
            function(html) {
                city = html.city;
                document.getElementById("city").innerHTML = city + "&nbsp;<i class='fa fa-map-marker' aria-hidden='true'></i>";
                province = html.province;
                document.getElementById("province").innerHTML = province;
                adcode = html.adcode;
                console.log(html);
                $.get(
                    'https://restapi.amap.com/v3/weather/weatherInfo?city=' + adcode + '&key=07ea516d52e6cbc1bed936289d8061c9&extensions=all',
                    function(html) {
                        console.log(html);
                        weatherGaode = html;
                        document.getElementsByClassName("weather")[0].innerHTML = weatherGaode.forecasts[0].casts[0].dayweather;
                        document.getElementsByClassName("temperature")[0].innerHTML = "" + weatherGaode.forecasts[0].casts[0].daytemp + "<span style='font-size: 8vh;''><b>°C</b></span>";
                        document.getElementById("wind").innerHTML = weatherGaode.forecasts[0].casts[0].daywind + "风" + weatherGaode.forecasts[0].casts[0].daypower + "级";
                        document.getElementById("date").innerHTML = "" + weatherGaode.forecasts[0].reporttime + " 更新";
                        for (i = 0; i < 9; i += 3) {
                            document.getElementsByTagName("td")[i].innerHTML = weatherGaode.forecasts[0].casts[i / 3].date;
                            if (weatherGaode.forecasts[0].casts[i / 3].nightweather == weatherGaode.forecasts[0].casts[i / 3].dayweather) document.getElementsByTagName("td")[i + 1].innerHTML = weatherGaode.forecasts[0].casts[i / 3].dayweather;
                            else {
                                document.getElementsByTagName("td")[i + 1].innerHTML = weatherGaode.forecasts[0].casts[i / 3].dayweather + "/" + weatherGaode.forecasts[0].casts[i / 3].nightweather;
                            }
                            document.getElementsByTagName("td")[i + 2].innerHTML = weatherGaode.forecasts[0].casts[i / 3].nighttemp + "~" + weatherGaode.forecasts[0].casts[i / 3].daytemp + "°C";
                        }
                    }
                );
                $.get(
                    'http://wthrcdn.etouch.cn/weather_mini?city=' + city,
                    function(html) {
                        weather = JSON.parse(html);
                        console.log(weather);
                        document.getElementsByClassName("ganmao")[0].innerHTML = weather.data.ganmao;
                    }
                );
            }
        );
    </script>
</body>

</html>